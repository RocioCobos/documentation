"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[13483],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var i=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,l=function(e,t){if(null==e)return{};var n,i,l={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=i.createContext({}),u=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return i.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,l=e.mdxType,a=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),c=u(n),h=l,m=c["".concat(s,".").concat(h)]||c[h]||d[h]||a;return n?i.createElement(m,o(o({ref:t},p),{},{components:n})):i.createElement(m,o({ref:t},p))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var a=n.length,o=new Array(a);o[0]=h;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[c]="string"==typeof e?e:l,o[1]=r;for(var u=2;u<a;u++)o[u]=n[u];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},9466:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>u});var i=n(87462),l=(n(67294),n(3905));const a={sidebar_position:2},o="Search",r={unversionedId:"apis/for-buyers/hotel-x-pull-buyers-api/booking-flow/search",id:"apis/for-buyers/hotel-x-pull-buyers-api/booking-flow/search",title:"Search",description:"Search serves as the initial step in our booking flow, with the objective of verifying availability within the specified date range and for the requested number of guests, either for specific hotels or for hotels in the desired destination. It provides a comprehensive list of available options based on your search criteria. The returned fields include:",source:"@site/docs/apis/for-buyers/hotel-x-pull-buyers-api/booking-flow/search.mdx",sourceDirName:"apis/for-buyers/hotel-x-pull-buyers-api/booking-flow",slug:"/apis/for-buyers/hotel-x-pull-buyers-api/booking-flow/search",permalink:"/docs/apis/for-buyers/hotel-x-pull-buyers-api/booking-flow/search",draft:!1,editUrl:"https://github.com/Travelgate/documentation/tree/main/docs/apis/for-buyers/hotel-x-pull-buyers-api/booking-flow/search.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/docs/apis/for-buyers/hotel-x-pull-buyers-api/booking-flow/overview"},next:{title:"Quote",permalink:"/docs/apis/for-buyers/hotel-x-pull-buyers-api/booking-flow/quote"}},s={},u=[{value:"Inputs",id:"inputs",level:2},{value:"1. Criteria",id:"1-criteria",level:3},{value:"2. Settings",id:"2-settings",level:3},{value:"3. Filter Search",id:"3-filter-search",level:3},{value:"Requests Examples",id:"requests-examples",level:3},{value:"Response",id:"response",level:2},{value:"Frequently asked questions",id:"frequently-asked-questions",level:2}],p={toc:u},c="wrapper";function d(e){let{components:t,...n}=e;return(0,l.kt)(c,(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"search"},"Search"),(0,l.kt)("p",null,"Search serves as the initial step in our booking flow, with the objective of verifying availability within the specified date range and for the requested number of guests, either for specific hotels or for hotels in the desired destination. It provides a comprehensive list of available options based on your search criteria. The returned fields include:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"hotelCode")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"hotelName")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"boardCode")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"paymentType")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"occupancies")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"rooms")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"price")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"rateRule")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"cancelPolicy")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"id"))),(0,l.kt)("admonition",{type:"caution"},(0,l.kt)("p",{parentName:"admonition"},"Remember to upload your ",(0,l.kt)("a",{parentName:"p",href:"../plugins/overview"},"mapping files")," to your FTP account in those cases you run requests with your own context codes, this way you will receive results from all your Sellers with your own hotel codes.")),(0,l.kt)("h2",{id:"inputs"},"Inputs"),(0,l.kt)("p",null,"When creating your search query, you have three different inputs to fill based on your specific needs:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Criteria"),(0,l.kt)("li",{parentName:"ol"},"Settings"),(0,l.kt)("li",{parentName:"ol"},"Filter Search")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-graphql"},"query {\n    hotelX {\n    search\n      criteria: {}\n      settings: {}\n      filterSearch: {}\n    }\n}\n")),(0,l.kt)("h3",{id:"1-criteria"},"1. Criteria"),(0,l.kt)("p",null,"The search query offers versatility in search options, with certain fields marked as mandatory (",(0,l.kt)("inlineCode",{parentName:"p"},"checkIn"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"checkOut"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"hotels")," etc.) and others as optional (",(0,l.kt)("inlineCode",{parentName:"p"},"language"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"currency"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"nationality")," etc.). This flexibility empowers you to create a personalized Search Query, tailoring the requested fields to your specific needs. "),(0,l.kt)("p",null,"To specify your search criteria you need to use the input ",(0,l.kt)("inlineCode",{parentName:"p"},"HotelCriteriaSearchInput")," in your query variables:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "criteriaSearch": {\n        "checkIn": "2024-10-28",\n        "checkOut": "2024-10-29",\n        "occupancies": [\n            {\n                "paxes": [\n                    {\n                        "age": 30\n                    },\n                    {\n                        "age": 30\n                    }\n                ]\n            }\n        ],\n        "hotels": [\n            "1",\n            "2"\n        ],\n        "currency": "EUR",\n        "market": "ES",\n        "language": "es",\n        "nationality": "ES"\n    }\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Mandatory criteria:")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"checkIn")," (yyyy-mm-dd)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"checkOut")," (yyyy-mm-dd)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"hotels")," (we recommend a maximum of 200 hotel codes per request)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"destinations")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"occupancies")," (for multi-room bookings, this array will contain multiple elements, rooms + you will need to detail the occupancy for each room requested.)")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Optional criteria:")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"language")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"currency")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"nationality")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"markets"))),(0,l.kt)("h3",{id:"2-settings"},"2. Settings"),(0,l.kt)("p",null,"Settings are the common configurations used to construct requests to the supplier/s. By default, we apply the same configuration to all Hotel-X clients."),(0,l.kt)("p",null,"To specify your settings you need to use the input ",(0,l.kt)("inlineCode",{parentName:"p"},"HotelSettingsInput")," in your query variables:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "settings": {\n        "client": "client_demo",\n        "context": "HOTELTEST",\n        "testMode": true,\n        "auditTransactions": false,\n        "timeout": 5000\n    }\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Mandatory Settings:")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"context")," (Your context code must be linked to the mapping files previously uploaded on your side to the FTP. By doing so, you will receive results from all your Sellers with your own Hotel Codes, ensuring a smooth and seamless process)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"timeout")," (Timeout in milliseconds for supplier connections. Applied to all suppliers; won't close client connection if exceeded)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"businessRules")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"language")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"currency")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"nationality")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"markets"))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Optional Settings:")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"group")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"auditTransactions")," "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"suppliers")," (Each one contains its own code, settings and accesses)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"plugins")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"testMode")," (This flag allows only the accesses checked as test)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"clientTokens")," (Used to identify the origin of the request, this is only used in plugins)")),(0,l.kt)("admonition",{title:"Key Recommendations",type:"tip"},(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Customize the ",(0,l.kt)("inlineCode",{parentName:"p"},"timeout")," according to your needs, taking into consideration the maximum values in Search is 25,000ms.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Set the ",(0,l.kt)("inlineCode",{parentName:"p"},"auditTransaction"),' to "false" in Search for better performance.')))),(0,l.kt)("h3",{id:"3-filter-search"},"3. Filter Search"),(0,l.kt)("p",null,"Filters allow you to precisely tailor the response according to your preferences. "),(0,l.kt)("p",null,"To specify your filters you need to use the input ",(0,l.kt)("inlineCode",{parentName:"p"},"HotelXFilterSearchInput")," in your query variables. The available filters inside this input are:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"plugin"),": You can filter and specify which ",(0,l.kt)("a",{parentName:"p",href:"../plugins/overview"},"plugins")," need to be included or excluded.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"rateRules"),": This filter enables you to narrow down the options returned by the suppliers based on the desired rate rules you want to include or exclude.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"status"),": Use this filter to determine which status (OK and RQ) will be included or excluded in the response.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"access"),": By using the access filter, our system will exclusively include or exclude options from the selected accesses. If you opt not to set any access at all, requests will be made to all available accesses."))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "filterSearch": {\n        "access": {\n            "includes": [\n                "2"\n            ]\n        }\n    }\n}\n')),(0,l.kt)("p",null,"You would need to apply the same approach for filter for specific plugin (",(0,l.kt)("inlineCode",{parentName:"p"},"plugin"),"), rate rule (",(0,l.kt)("inlineCode",{parentName:"p"},"rateRule"),") and status (",(0,l.kt)("inlineCode",{parentName:"p"},"status"),")."),(0,l.kt)("h3",{id:"requests-examples"},"Requests Examples"),(0,l.kt)("p",null,"TODO"),(0,l.kt)("h2",{id:"response"},"Response"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-graphql"},"TODO\n")),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"In the room structure response there is a refundable field. If that field is set to false, it means that the room has 100% cancellation cost, in other words, the room is NON-REFUNDABLE. If the field returns a null value, it means that the seller is not able to return this info at this step. Some sellers do not return cancellation policies in availability. You can find out the specifities of each seller in their ",(0,l.kt)("a",{parentName:"p",href:"/docs/apis/for-buyers/hotel-x-pull-buyers-api/content/metadata"},"metadata"),".")),(0,l.kt)("h2",{id:"frequently-asked-questions"},"Frequently asked questions"),(0,l.kt)("details",null,(0,l.kt)("summary",null,"How many hotel codes per request can I request in Search?"),(0,l.kt)("div",null,(0,l.kt)("div",null,"We recommend a maximum of 200 hotels: the new aggregator will split them in batches in order to request all of them to each Seller."))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Are there any limitations on the number of searches/minute?"),(0,l.kt)("div",null,(0,l.kt)("div",null,"Not from TravelgateX side, we don't have any limitations on the RPM in any of our methods. However, some Sellers may have some limitations so we suggest you contact directly with them in order to discuss this information."))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Does nationality or market affect the price returned?"),(0,l.kt)("div",null,(0,l.kt)("div",null,"Yes, nationality and market might affect the rates received in Search response. This depends on the Seller so if you consider that you should get (or not) different rates depending on the nationality or market, please contact them directly."))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"How can I search in single or multi mode?"),(0,l.kt)("p",null,"You have the possibility to chose between searching in a single mode vs searching in a multi mode."),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Singlemode search"),(0,l.kt)("p",null,"The default mode in Hotel-X allows our Partners to perform one search per Seller connected to their account at a time. When running your Search, you should add the Seller's access code you would like to query.",(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'"filterSearch": {\n    "access": {\n        "includes": ["2"]\n    }\n}\n')))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Multimode search"),(0,l.kt)("p",null,"The multimode query allows our Partners to search multiple Sellers at the same time in just one request. To search in multimode, start by uploading your hotel mapping files to your FTP. Once the files are processed, you'll have the ability to search multiple Sellers simultaneously by using your own context and hotel codes.",(0,l.kt)("br",null),(0,l.kt)("br",null),"1. Specifying the access codes in the filter node in your variables: the query will only be sent to the accesses specified.",(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'"filterSearch": {\n    "access": {\n        "includes": ["2", "3"]\n    }\n}\n'))),(0,l.kt)("p",null,'2. Not specifying any accesses: The query will be sent to all the accesses connected to your account (only the ones belonging to the Sellers where the mapping files has been uploaded). This query will also check the value of the "testMode" tag in order to request only the test or production accesses, accordingly.'))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Why there are so many fields with null value in the Search response?"),(0,l.kt)("div",null,(0,l.kt)("div",null,'The number of "null" values returned is determined by the information provided by Sellers. For example, if you include certain fields in your Search Query but the Seller does not have that information available on their side, the value will be returned in our response as "null".'))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Can I filter the Hotel-X Search results by payment type?"),(0,l.kt)("div",null,(0,l.kt)("div",null,"Unfortunately, Hotel-X API does not currently offer the capability to filter search results by payment type."))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"How can I limit and filter options through optionsQuota and Business Rules?"),(0,l.kt)("div",null,(0,l.kt)("div",null,(0,l.kt)("ul",null,(0,l.kt)("li",null,(0,l.kt)("b",null,"optionsQuota, how to limit the number of options in SearchRS:")," Thanks to the optionsQuota tag, you are able to control and limit the number of options per Mealplan returned in SearchRS in those cases the Seller allows business rules (",(0,l.kt)("i",null,"you will be able to check this information through our Metadata Query"),"). Note that we have established a system-level limit so that if the OptionsQuota set on your side is higher than the limit established, we will use the one with the lowest value."),(0,l.kt)("br",null),(0,l.kt)("li",null,(0,l.kt)("b",null,"businessRulesType, how to filter options through Business Rules:")," These are the 2 types of businessRules that may be applied.",(0,l.kt)("ul",null,(0,l.kt)("li",null,"CHEAPER_AMOUNT: The cheapest options are returned without exceedig the optionsQuota limit."),(0,l.kt)("li",null,"ROOM_TYPE: It groups the options by room type without exceeding the optionsQuota limit.")),(0,l.kt)("br",null),"Please note that options are filtered using a limited combination of rooms types. First, we group same room types so you receive options with the same type/classification. For example: Standard-Standard-Standard-Standard, Junior-Junior-Junior-Junior\u2026. Then, we combine the cheapest rooms with the remaining rooms, always checking for duplicates and without execeeding the optionsQuota limit. If a Buyer sets a BusinessRules value, then it will be applied when the number of options returned exceeds the optionsQuota. If the client does not set any BusinessRules values, then the CheaperAmount BusinessRule is applied by default."))))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"What is the lifespan of the Search id?"),(0,l.kt)("div",null,(0,l.kt)("div",null,"Search ids do not expire, however, we strongly recommend to transition from Search to Quote as quickly as possible, this will ensure a smoother and more efficient booking process."))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"What is the occupancyrefID in Search response?"),(0,l.kt)("div",null,(0,l.kt)("div",null,'The OccupancyRefID serves as the unique identifier for each room. When you request a single room, the OccupancyRefID will always be "1". However, if you request two rooms, each option will specify the information that belongs to each room (either Room "1" or Room "2").'))),(0,l.kt)("details",null,(0,l.kt)("summary",null,'What does the "units" field indicate in the "rooms" node of the Search response?'),(0,l.kt)("div",null,(0,l.kt)("div",null,'The "units" field refers to the number of available rooms of the same type in the hotel. Please note that whether this information is returned or not depends on the Seller.'))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"How can we differentiate a child from an infant? What is the age range of each of them?"),(0,l.kt)("div",null,(0,l.kt)("div",null,"The age range for children and infants may vary depending on the Seller's restrictions. To find out the specific age range restrictions for each of your Sellers, you can refer to our Metadata Method or directly contact the Seller."))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Can I receive daily prices in Hotel-X Search response?"),(0,l.kt)("div",null,(0,l.kt)("div",null,"Yes, you can receive Daily Prices in Search Response (if the Seller returns this information) through the `roomPrice` > `priceBreakdown`"))),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Can I split the rooms returned within an Option and book them separately?"),(0,l.kt)("div",null,(0,l.kt)("div",null,"We introduced the option node to ensure that all rooms within a specific option can be booked. If you need to book separate rooms, please send two separate Search requests, one for each room."))))}d.isMDXComponent=!0}}]);